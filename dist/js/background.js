chrome.runtime.onInstalled.addListener((()=>{chrome.contextMenus.removeAll((()=>{chrome.contextMenus.create({id:"factCheck",title:"Fact Check HelloDing",contexts:["selection"]}),chrome.contextMenus.create({id:"AIImageDetect",title:"Detect AI Generated Image",contexts:["image"]})}))})),chrome.contextMenus.onClicked.addListener(((e,t)=>{"factCheck"===e.menuItemId&&e.selectionText&&chrome.storage.local.set({lastHighlight:e.selectionText},(()=>{chrome.action.openPopup()})),"AIImageDetect"===e.menuItemId&&e&&e.srcUrl&&(chrome.storage.local.set({imageUrl:e.srcUrl},(()=>{chrome.action.openPopup()})),console.log("Image URL:",e.srcUrl))})),chrome.runtime.onConnect.addListener((e=>{"popup"===e.name&&e.onDisconnect.addListener((()=>{chrome.storage.local.remove("lastHighlight"),chrome.storage.local.remove("imageUrl")}))}));